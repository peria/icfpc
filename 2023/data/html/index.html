<!DOCTYPE html>
<html lang="ja">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <script type="module">
    import data from "../solution/solution-data.json" assert { type: "json" };
    let score = data.map(x => x['score'] - 0).reduce((s, x) => s + x);
    document.getElementById('score').innerText = score.toLocaleString();

    let table = document.getElementById('problems');
    let html = '';
    data.forEach(x => {
      const score = (x['score'] - 0).toLocaleString();
      let tr = `<td><a href="solution.html?id=${x['problem_id']}">${x['problem_id']}</a>`;
      tr += `<td><span class="right">${score}`;
      tr += `<td><span class="right">${(x['elapsed_time'] - 0).toFixed(1)}`;
      tr += `<td><span class="right">${x['num_iterations']}`;
      tr += `<td><span class="right">${x['num_musicians']}`;
      tr += `<td><span class="right">${x['num_instruments']}`;
      tr += `<td><span class="right">${x['num_attendees']}`;
      tr += `<td>${x['room_width']} x ${x['room_height']}`;
      tr += `<td>${x['stage_width']} x ${x['stage_height']}`;
      html += `<tr>${tr}`;
    });
    table.innerHTML = html;
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
</head>

<body>
  <div class="container">
    <h4 class="right-align">
      Total Score: <span id="score"></span>
    </h4>
    <h4 class="right-align">
      sanma: <span>95,182,115,684</span>
    </h4>
    <h4 class="right-align">
      #1 @ freeze: <span>136,841,439,993</span>
    </h4>
  </div>

  <section class="container">
    <table>
      <thead>
        <tr>
          <th class="center">ID</th>
          <th class="center">Score</th>
          <th class="center">Time[sec]</th>
          <th class="center">Iterations</th>
          <th class="center">演者数</th>
          <th class="center">楽器数</th>
          <th class="center">客数</th>
          <th class="center">部屋</th>
          <th class="center">ステージ</th>
        </tr>
      </thead>
      <tbody id="problems">
      </tbody>
    </table>
  </section>
</body>

</html>